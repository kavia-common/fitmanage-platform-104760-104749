{"is_source_file": true, "format": "Dart", "description": "This file defines the AppState class, which manages application-wide state, including authentication token, WebSocket connection, and UI navigation index. It uses Flutter's ChangeNotifier for state management, dotenv for environment variables, and web_socket_channel for WebSocket communication.", "external_files": ["package:flutter/foundation.dart", "package:flutter_dotenv/flutter_dotenv.dart", "package:web_socket_channel/web_socket_channel.dart"], "external_methods": ["dotenv.env[]", "WebSocketChannel.connect", "StreamSubscription.cancel", "WebSocketSink.close", "notifyListeners", "debugPrint"], "published": ["token", "wsConnected", "bottomIndex", "apiBaseUrl", "wsBaseUrl", "connectNotifications", "disconnectNotifications"], "classes": [{"name": "AppState", "description": "A state management class for the Flutter app, handling authentication tokens, WebSocket notifications, and UI navigation state, extending ChangeNotifier for reactive updates."}], "methods": [{"name": "AppState", "description": "Constructor initializing the AppState object."}, {"name": "updateBottomIndex", "description": "Updates the bottom navigation bar index and notifies listeners."}, {"name": "setToken", "description": "Sets the authentication token and notifies listeners."}, {"name": "apiBaseUrl", "description": "Returns the API base URL from environment variables or defaults to localhost."}, {"name": "wsBaseUrl", "description": "Returns the WebSocket base URL from environment variables or defaults to localhost."}, {"name": "connectNotifications", "description": "Establishes WebSocket connection for notifications, sets up message handlers, and manages connection state."}, {"name": "disconnectNotifications", "description": "Closes WebSocket connection and cancels subscriptions."}, {"name": "dispose", "description": "Cleans up resources by disconnecting WebSocket when the AppState is disposed."}], "calls": ["WebSocketChannel.connect", "notifyListeners", "debugPrint", "StreamSubscription.cancel", "WebSocketSink.close"], "search-terms": ["AppState", "WebSocketChannel", "dotenv", "WebSocket", "connectNotifications", "disconnectNotifications", "navigation index"], "state": 2, "file_id": 20, "knowledge_revision": 43, "git_revision": "", "hash": "326e3fa1ac07696cac692891682f21c4", "format-version": 4, "code-base-name": "fitness_nutrition_frontend", "filename": "fitness_nutrition_frontend/lib/state/app_state.dart", "revision_history": [{"43": ""}]}